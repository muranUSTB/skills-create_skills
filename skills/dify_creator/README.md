# Dify 工作流生成器 (dify_creator)

通过多轮对话引导用户明确需求，生成可直接导入 Dify 的工作流 DSL YAML 配置。

## 目录结构

```
dify_creator/
├── README.md                      # 主文档（使用说明、特性、示例）
├── SKILL.md                       # 技能定义文件（Claude Code Skill 配置）
└── organized_dsl/                 # 整理后的 Dify 案例 DSL 文件
    ├── INDEX.md                   # 分类索引和标签查找指南
    ├── Dify_DSL_节点完整参考指南.md  # 节点类型完整参考
    ├── 01_内容生成与创作/           # 文本创作、翻译、提示词优化 (~15个)
    ├── 02_图像生成与设计/           # AI绘画、风格迁移 (~12个)
    ├── 03_视频生成/                # 文生视频、图像转视频 (~8个)
    ├── 04_数据分析与可视化/         # 图表、报表、ECharts (~6个)
    ├── 05_文档处理与OCR/            # PDF解析、票据识别 (~10个)
    ├── 06_知识库与RAG/              # 文档问答、知识检索 (~4个)
    ├── 07_Agent与工具调用/          # Agent、MCP、外部API (~12个)
    ├── 08_教育与学习/               # 学科学习、测评、错题本 (~6个)
    ├── 09_商业与办公/               # 合同审查、发票、SQL (~8个)
    ├── 10_多媒体处理/               # TTS、音视频转文字 (~6个)
    ├── 11_代码与开发/               # 代码生成、API文档 (~4个)
    ├── 12_创意与娱乐/               # 游戏、故事、节日主题 (~8个)
    ├── 13_信息聚合/                 # RSS新闻、搜索工具 (~4个)
    └── 14_参考示例/                 # 基础模板、复杂案例 (~12个)

共整理 125+ 个 Dify 工作流 DSL 文件
```

## 简介

dify_creator 是一个专业的 Claude Code Skill，专注于帮助用户快速创建符合 Dify 2.0 规范的工作流配置。通过智能对话引导和参考现有案例，生成可直接导入 Dify 平台的 YAML 文件。

## 功能特性

- **智能对话引导**：多轮问答帮助用户梳理需求
- **参考学习**：基于现有 Dify 案例自动匹配最佳实践
- **完整 DSL 生成**：输出符合 Dify 2.0 规范的完整配置
- **多类型支持**：Chatflow、Workflow、Advanced Chat 全面覆盖
- **变量追踪**：自动管理节点间的变量传递和引用

## 快速开始

在 Claude Code 中激活此 Skill 后，通过对话描述你的需求：

```
我想创建一个 Dify 工作流，用于...
```

Skill 将引导你完成以下步骤：

1. 确认基础信息（名称、描述、应用类型）
2. 了解功能需求（输入、处理、输出）
3. 分析流程结构（分支、循环、错误处理）
4. 选择模型和工具
5. 参考现有案例
6. 生成完整 DSL 配置

## 应用类型

| 类型 | 说明 | 适用场景 |
|------|------|---------|
| `workflow` | 批处理任务，单轮执行 | 数据处理、批量生成 |
| `chatflow` | 对话式应用，多轮交互 | 智能客服、对话助手 |
| `advanced-chat` | 高级聊天模式 | 复杂对话场景 |

## 支持的节点类型

| 节点 | 功能 |
|------|------|
| `start` | 开始节点，接收用户输入 |
| `llm` | 大语言模型调用 |
| `tool` | 工具/插件调用 |
| `answer` | 回复用户 |
| `if-else` | 条件分支 |
| `code` | 代码执行 |
| `iteration` | 循环处理 |
| `template-transform` | 模板转换 |
| `variable-aggregator` | 变量聚合 |
| `knowledge-retrieval` | 知识库检索 |

## 使用示例

### 示例对话

**用户**：我想创建一个会议纪要生成器

**Skill**：好的，让我来帮你创建会议纪要生成器。请回答几个问题：

1. 工作流名称？（如：meeting-minutes-generator）
2. 输入方式：音频文件还是文本？
3. 需要哪些处理步骤？（语音转文字、内容总结、要点提取）

**用户**：
- 名称：meeting-minutes
- 输入：音频/视频文件
- 流程：提取音频 → 语音转文字 → AI 总结 → 生成纪要

**Skill**：[生成完整的 DSL 配置]

### 输出示例

生成的 YAML 文件可直接导入 Dify：

```yaml
app:
  description: 会议纪要自动生成器
  mode: workflow
  name: meeting-minutes
kind: app
version: 0.3.0
workflow:
  graph:
    nodes:
    - id: '1747702103197'
      type: start
      data:
        title: 开始
        variables:
        - variable: audio_file
          type: file
          label: 会议录音
          required: true
    # ... 更多节点
```

## 参考案例

Skill 会参考以下目录中的 Dify 案例：

```
参考目录：e:\sany\dify_example\dify-for-dsl\dsl\

包含案例：
- 52-音视频转文字会议纪要
- 57-中小学数学错题本
- 61-发票识别
- 72-PDF翻译
- 74-秘塔搜索
- 等 80+ 实际案例
```

## 最佳实践

1. **明确需求**：在对话中清晰描述工作流目标
2. **参考借鉴**：告诉 Skill 参考类似的已有案例
3. **逐步细化**：先创建核心流程，再添加分支和异常处理
4. **测试验证**：导入 Dify 后进行调试和优化

## 常见问题

**Q: 支持自定义插件吗？**
A: 支持，在对话中说明需要使用的插件，Skill 会在 dependencies 中声明。

**Q: 可以生成 Chatflow 吗？**
A: 可以，只需在对话中指定应用类型为 `chatflow` 或 `advanced-chat`。

**Q: 变量引用格式是什么？**
A: 使用 `{{#节点ID.输出字段#}}` 格式引用变量。

## 许可证

本项目采用 CC BY-NC-SA 4.0 许可证。

## 作者

**沐然** - Dify 工作流生成器作者

---
